/*! web-video 02-10-2018 */

function bootstrap(){var e=document.getElementById("vidForm"),n=document.getElementById("tableBody");e.addEventListener("submit",videoUpload.bind(null,e,n)),n.addEventListener("click",videoPlay)}function timeFormat(e){var n=e%3600,t=Math.round((e-n)/3600),a=n%60,r=Math.round((n-a)/60),i=Math.round(a);return t+":"+(r=("00"+r).slice(-2))+":"+(i=("00"+i).slice(-2))}function playerInitialize(e,n){e.innerHTML="Start",e.classList.remove("btn-success","btn-warning","btn-danger"),e.classList.add("btn-success"),n.setAttribute("style","width: 0%; color: #f00;"),n.innerHTML="0:00:00"}function timeupdateHandler(e,n){var t=e.currentTime,a=e.duration;n.setAttribute("style","width: "+Math.round(100*t/a)+"%; color: #f00;"),n.innerHTML=timeFormat(t)}function endedHandler(e,n,t){playerInitialize(e,n),t.fastSeek(0)}function videoInialize(e){var n=e.parentElement.parentElement.getElementsByClassName("play-progress-bar")[0],t=e.parentElement.parentElement.getElementsByTagName("video")[0];playerInitialize(e,n),t.removeEventListener("timeupdate",timeupdateHandler),t.addEventListener("timeupdate",timeupdateHandler.bind(null,t,n)),t.removeEventListener("ended",endedHandler),t.addEventListener("ended",endedHandler.bind(null,e,n,t))}function startHandler(e){e.innerHTML;var n=e.parentElement.parentElement.getElementsByTagName("video")[0];n.duration;n.error||(n.paused?(e.classList.remove("btn-success","btn-warning","btn-danger"),e.classList.add("btn-danger"),e.innerHTML="Pause",n.play()):(e.classList.remove("btn-success","btn-warning","btn-danger"),e.classList.add("btn-warning"),e.innerHTML="Resume",n.pause()))}function videoPlay(e){var n=e.target;n.classList.contains("play-button")&&(videoInialize(n),startHandler(n))}window.onload=bootstrap();var rowTemplate=document.getElementById("rowTemplate"),rowTemplateFunc=_.template(rowTemplate.innerHTML),currentRowNumber=1;function incrementRowNumber(){return currentRowNumber++}function videoUpload(e,n,t){for(var a=t.target[0].files,r=null,i=0;i<a.length;i++)n.insertAdjacentHTML("beforeEnd",rowTemplateFunc({indexOfRow:incrementRowNumber(),blob:window.URL.createObjectURL(a[i]),filename:a[i].name}));t.preventDefault(),(r=document.createEvent("HTMLEvents")).initEvent("reset",!1,!0),e.dispatchEvent(r)}